<!DOCTYPE html>
<html lang="en">
<head>
	<title>Form & List Sample</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/css.css">
    <script src="js/react.min.js"></script>
    <script src="js/react-dom.min.js"></script>
    <script src="js/browser.min.js"></script>
</head>
<body>
	<br />
	<div id="ppal_div" ></div>
    <script type="text/babel">
	class Testapp extends React.Component {
			constructor(props)
			{
				super(props);
				this.resettheapp = this.resettheapp.bind(this);
				this.resettheapp_top = this.resettheapp_top.bind(this);
				this.addtothelist = this.addtothelist.bind(this);
				this.handleChangename = this.handleChangename.bind(this);
				this.handleChangeage = this.handleChangeage.bind(this);
				this.handleChangeoccupation = this.handleChangeoccupation.bind(this);
				this.handleChangepassword = this.handleChangepassword.bind(this);
				var min = 101;
				var max = 199;
				var rand =  min + (Math.random() * (max-min));
				this.state = 
				{ 
					therandomm: rand, 
					name: '', 
					name_class: 'form-control', 
					age: '', 
					age_class: 'form-control', 
					occupation: 'Engineer', 
					occupation_class: 'form-control', 
					password: '', 
					password_class: 'form-control', 
					la_lista: [
						{name: '', 
						age: '', 
						occupation: '', 
						password: ''}]
				};
			} 
			handleChangename(event) 
			{ 
				var t_var = event.target.value;
				var t_class = 'form-control';
				if ( this.validatename(t_var) )
				{ 
					t_class = 'form-control is-valid'; 
				}
				else 
				{ 
					t_class = 'form-control is-invalid'; 
				}
				var min = 101; var max = 199; var rand =  min + (Math.random() * (max-min));
				this.setState({therandomm: rand, name: event.target.value, name_class: t_class}); 
			}
			validatename(the_var)
			{
				if ( /[A-Z]/.test(the_var) ) return true; else return false;
			}
			handleChangeage(event) 
			{ 
				var t_var = event.target.value;
				var t_class = 'form-control';
				if ( this.validateage(t_var) )
				{ 
					t_class = 'form-control is-valid'; 
				}
				else 
				{ 
					t_class = 'form-control is-invalid'; 
				}
				var min = 101; var max = 199; var rand =  min + (Math.random() * (max-min));
				this.setState({therandomm: rand, age: event.target.value, age_class: t_class}); 
			}
			validateage(the_var)
			{
				if ( /^\d+$/.test(the_var) ) return true; else return false;
			}
			handleChangeoccupation(event) 
			{ 
				var min = 101; var max = 199; var rand =  min + (Math.random() * (max-min));
				this.setState({therandomm: rand, occupation: event.target.value}); 
			}
			handleChangepassword(event) 
			{ 
				var t_var = event.target.value;
				var t_class = 'form-control';
				if (this.validatepassword(t_var))
				{ 
					t_class = 'form-control is-valid'; 
				}
				else 
				{ 
					t_class = 'form-control is-invalid'; 
				}
				var min = 101; var max = 199; var rand =  min + (Math.random() * (max-min));
				this.setState({therandomm: rand, password: event.target.value, password_class: t_class}); 
			}
			validatepassword(the_var)
			{
				if ( /[0-9]/.test(the_var) && /[a-zA-Z0-9_-]{4,8}/.test(the_var) && the_var.length <= 8 ) return true; else return false;
			}
			resettheapp()
			{
				var min = 101; var max = 199; var rand =  min + (Math.random() * (max-min));
				this.setState({therandomm: rand, 
					name: '', 
					name_class: 'form-control', 
					age: '', 
					age_class: 'form-control', 
					occupation: 'Engineer', 
					occupation_class: 'form-control', 
					password: '', 
					password_class: 'form-control', 
					la_lista: [
						{name: '', 
						age: '', 
						occupation: '', 
						password: ''}]
				}); 
			}
			resettheapp_top()
			{
				var min = 101; var max = 199; var rand =  min + (Math.random() * (max-min));
				this.setState({therandomm: rand, 
					name: '', 
					name_class: 'form-control', 
					age: '', 
					age_class: 'form-control', 
					occupation: 'Engineer', 
					occupation_class: 'form-control', 
					password: '', 
					password_class: 'form-control'
				}); 
			}
			addtothelist()
			{
				const tthe_name = this.state.name;
				const tthe_age = this.state.age;
				const tthe_occupation = this.state.occupation;
				const tthe_password = this.state.password;
				if ( this.validatename(tthe_name) ) 
				{
					if ( this.validateage(tthe_age) ) 
					{
						if ( this.validatepassword(tthe_password) ) 
						{
							const newitem = [{name: tthe_name, 
												age: tthe_age, 
												occupation: tthe_occupation, 
												password: tthe_password}];
							var current_la_lista = this.state.la_lista.concat(newitem);
							var min = 101; var max = 199; var rand =  min + (Math.random() * (max-min));
							this.setState({therandomm: rand, 
											name: '', 
											name_class: 'form-control', 
											age: '', 
											age_class: 'form-control', 
											occupation: 'Engineer', 
											occupation_class: 'form-control', 
											password: '', 
											password_class: 'form-control', 
											la_lista: current_la_lista});
						}
						else 
						{ alert('El password debe ser entre 4 y 8 caracteres y debe tener un número'); } 
					}
					else 
					{ alert('La edad SOLAMENTE pueden ser números'); } 
				}
				else 
				{ alert('El nombre debe tener al menos UNA (1) letra Mayúscula'); } 
			}
			render() 
			{
				return (
					<div className="container-fluid" >
						<div className="row" >
							<div className="col col-3 col-md-2" >
								<div className="form-group">
									<input 
										type="text" 
										className="form-control" 
										value={this.state.therandomm * 3} 
										id="therandomm_001" 
										autoComplete="off" 
										readOnly="true" 
									/>
								</div>
							</div>
							<div className="col col-3 col-md-2" >
								<div className="form-group">
									<input 
										type="text" 
										className="form-control" 
										value={this.state.therandomm * 5} 
										id="therandomm_002" 
										autoComplete="off" 
										readOnly="true" 
									/>
								</div>
							</div>
							<div className="col col-3 col-md-2" >
								<div className="form-group">
									<input 
										type="text" 
										className="form-control" 
										value={this.state.therandomm * 7} 
										id="therandomm_003" 
										autoComplete="off" 
										readOnly="true" 
									/>
								</div>
							</div>
						</div>
						<div className="row" >
							<div className="col col-3 col-md-2" >
								<h5>Name: </h5>
							</div>
							<div className="col col-9 col-md-6" >
								<div className="form-group">
									<input 
										type="text" 
										className={this.state.name_class} 
										value={this.state.name} 
										onChange={this.handleChangename} 
										id="name" 
										autoComplete="off" 
									/>
								</div>
							</div>
						</div>
						<div className="row" >
							<div className="col col-3 col-md-2" >
								<h5>Age: </h5>
							</div>
							<div className="col col-5 col-md-4" >
								<div className="form-group">
									<input 
										type="text" 
										className={this.state.age_class} 
										value={this.state.age} 
										onChange={this.handleChangeage} 
										id="age" 
										maxLength="2" 
										autoComplete="off" 
									/>
								</div>
							</div>
							<div className="col col-4 col-md-2" >
								<h5>Years</h5>
							</div>
						</div>
						<div className="row" >
							<div className="col col-3 col-md-2" >
								<h5>Occupation: </h5>
							</div>
							<div className="col col-9 col-md-6" >
								<div className="form-group">
									<select 
										className={this.state.occupation_class} 
										id="occupation" 
										value={this.state.occupation} 
										onChange={this.handleChangeoccupation} 
									>
										<option>Engineer</option>
										<option>Philosopher</option>
										<option>Architect</option>
										<option>Scientist</option>
										<option>Doctor</option>
									</select>
								</div>
							</div>
						</div>
						<div className="row" >
							<div className="col col-3 col-md-2" >
								<h5>Password: </h5>
							</div>
							<div className="col col-9 col-md-6" >
								<div className="form-group">
									<input 
										type="password" 
										className={this.state.password_class} 
										value={this.state.password} 
										onChange={this.handleChangepassword} 
										id="password" 
										autoComplete="off" 
									/>
								</div>
							</div>
						</div>
						<div className="row" >
							<div className="col col-4 col-md-1 offset-md-2" > 
								<button 
									type="button" 
									className="btn btn-success inheritor" 
									onClick={this.addtothelist}
								>Add</button>
							</div>
							<div className="col col-4 col-md-2" >
								<button 
									type="button" 
									className="btn btn-danger inheritor" 
									onClick={this.resettheapp_top}
								>Reset Top</button>
							</div>
							<div className="col col-4 col-md-2" >
								<button 
									type="button" 
									className="btn btn-danger inheritor" 
									onClick={this.resettheapp}
								>Reset All</button>
							</div>
						</div>
						<br />
						<div className="row" >
							<div className="col col-3 col-md-2" >
								<div className="form-group">
									<input 
										type="text" 
										className="form-control" 
										value={this.state.therandomm * 9} 
										id="therandomm_004" 
										autoComplete="off" 
										readOnly="true" 
									/>
								</div>
							</div>
							<div className="col col-3 col-md-2" >
								<div className="form-group">
									<input 
										type="text" 
										className="form-control" 
										value={this.state.therandomm * 11} 
										id="therandomm_005" 
										autoComplete="off" 
										readOnly="true" 
									/>
								</div>
							</div>
							<div className="col col-3 col-md-2" >
								<div className="form-group">
									<input 
										type="text" 
										className="form-control" 
										value={this.state.therandomm * 13} 
										id="therandomm_006" 
										autoComplete="off" 
										readOnly="true" 
									/>
								</div>
							</div>
						</div>
						<table className="table">
							<thead>
								<tr>
									<th>Name</th>
									<th>Age</th>
									<th>Occupation</th>
									<th>Password</th>
								</tr>
							</thead>
							<tbody>
								{this.state.la_lista.map((list_item) => <tr>
											<td>
												{list_item.name}
											</td>
											<td>
												{list_item.age}
											</td>
											<td>
												{list_item.occupation}
											</td>
											<td>
												{list_item.password}
											</td>
										</tr>)}
							</tbody>
						</table>
					</div>
				);
			}
		}
		ReactDOM.render(<Testapp />, document.getElementById('ppal_div'));
    </script>
</body>
